# Multimedia

### Camera
- 카메라 앱을 실행한 후 결과 사진을 받아 처리   

<img width="194" alt="KakaoTalk_20210315_220219741" src="https://user-images.githubusercontent.com/50178026/111157446-3b593980-85da-11eb-8587-a16e88178355.png"> <img width="192" alt="KakaoTalk_20210315_220437290" src="https://user-images.githubusercontent.com/50178026/111157649-79565d80-85da-11eb-92cc-f52192c493db.png">


> res/xml/external.xml
```xml
<paths xmlns:android="http://schemas.android.com/apk/res/android">
    <!--외부 폴더 지정-->
    <external-path
        name="sdcard"
        path="."/>
</paths>
```
> 위험권한, fileprovider 추가   
> AndridManifest.xml  
```xml
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-feature android:name="android.hardware.camera2"
        android:required="true" />
<application
        <provider
            android:authorities="org.techtown.mymulti.fileprovider"
            android:name="androidx.core.content.FileProvider"
            android:exported="false"
            android:grantUriPermissions="true">
            <meta-data
                android:name="android.support.FILE_PROVIDER_PATHS" 
                android:resource="@xml/external"/>
        </provider>
</application>
```
> build.gradle(app) -> 위험 권한 자동 부여 라이브러리 추가   
> MainActivity.java
```java
public class MainActivity extends AppCompatActivity implements AutoPermissionsListener {
    ImageView imageView;
    File file;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        imageView = findViewById(R.id.imageView);
        Button button = findViewById(R.id.button);
        button.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                takePicture();
            }
        });
        AutoPermissions.Companion.loadAllPermissions(this,101);
    }

    public void takePicture(){
        //사진파일 위치만 받아서 파일을 읽어들임

        if(file == null){
            file = createFile();
        }
        Uri fileUri = FileProvider.getUriForFile(this,"org.techtown.mymulti.fileprovider",file);
        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        intent.putExtra(MediaStore.EXTRA_OUTPUT,fileUri);
        //사진 찍기 화면 띄움
        if(intent.resolveActivity(getPackageManager()) != null){
            startActivityForResult(intent,101);
        }

    }
    public File createFile(){
        String filename = "capture.jpg";
        File storageDir = Environment.getExternalStorageDirectory();
        //폴더 아래에 새로운 파일 지정
        File outFile = new File(storageDir,filename);
        return outFile;
    }
    // 사진 찍고 이 앱으로 돌아옴
    // 다른 앱에서 온 결과 받아야함
    @Override
    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        if(requestCode == 101 && resultCode ==RESULT_OK){
            // Bitmap 객체: 메모리에 만들어지는 이미지
            // 이미지 파일 -> Bitmap 객체로 만듦
            BitmapFactory.Options options = new BitmapFactory.Options();
            options.inSampleSize = 6;
            Bitmap bitmap = BitmapFactory.decodeFile(file.getAbsolutePath(),options);

            imageView.setImageBitmap(bitmap);
        }
    }

    // 권한 허용 알림
    @Override
    public void onRequestPermissionsResult(int requestCode, String permissions[],
                                           int[] grantResults) {
        super.onRequestPermissionsResult(requestCode, permissions, grantResults);
        AutoPermissions.Companion.parsePermissions(this, requestCode, permissions, this);
    }
    @Override
    public void onDenied(int requestCode, String[] permissions) {
        Toast.makeText(this, "permissions denied : " + permissions.length,Toast.LENGTH_LONG).show();
    }
    @Override
    public void onGranted(int requestCode, String[] permissions) {
        Toast.makeText(this, "permissions granted : " + permissions.length, Toast.LENGTH_LONG).show();
    }
}
```

### Music

### Youtube   
